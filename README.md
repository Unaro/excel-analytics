# Urban Analytics Platform

**–í–µ—Ä—Å–∏—è:** 0.2.0  
**–°—Ç–µ–∫:** Next.js 16, React 19, TypeScript, TailwindCSS 4

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≥—Ä–∞–¥–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel/CSV —Ñ–∞–π–ª–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—á—ë—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞—Ö.

![Next.js](https://img.shields.io/badge/Next.js-16.1.6-black?logo=next.js)
![React](https://img.shields.io/badge/React-19.2.4-61dafb?logo=react)
![TypeScript](https://img.shields.io/badge/TypeScript-5.7.3-blue?logo=typescript)
![TailwindCSS](https://img.shields.io/badge/TailwindCSS-4.2.1-38bdf8?logo=tailwindcss)

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üìä –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∏–º–ø–æ—Ä—Ç Excel/CSV —Ñ–∞–π–ª–æ–≤ —Å –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–∏–ø–æ–≤
- **üèó –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–µ—Ä–∞—Ä—Ö–∏–∏** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–†–µ–≥–∏–æ–Ω ‚Üí –ì–æ—Ä–æ–¥ ‚Üí –†–∞–π–æ–Ω)
- **üìê –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–µ—Ç—Ä–∏–∫** ‚Äî —à–∞–±–ª–æ–Ω—ã —Ñ–æ—Ä–º—É–ª –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–π (SUM, AVG, custom)
- **üìà –ì—Ä—É–ø–ø—ã –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π** ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–æ–ª–æ–Ω–∫–∞–º
- **üìâ –î–∞—à–±–æ—Ä–¥—ã** ‚Äî –º–∞—Ç—Ä–∏—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ KPI
- **üé® –£—Å–ª–æ–≤–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —Ü–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π
- **üåì –¢—ë–º–Ω–∞—è —Ç–µ–º–∞** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
|-----------|-----------|
| **Framework** | Next.js 16.1.6 (App Router) |
| **Language** | TypeScript 5.7.3 |
| **State** | Zustand 5.0.3 (—Å persist) |
| **Storage** | IndexedDB (idb-keyval), localStorage |
| **Styling** | TailwindCSS 4.2.1 |
| **UI Kit** | Radix UI, Lucide Icons |
| **DnD** | @dnd-kit/core 6.3.1 |
| **Charts** | Recharts 2.15.0 |
| **Math** | Math.js 15.1.0 |
| **Validation** | Zod 4.3.6 |
| **Excel** | XLSX 0.18.5 |

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd excel-analytics

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ [http://localhost:3000](http://localhost:3000)

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö (`/setup`)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **¬´–î–∞–Ω–Ω—ã–µ –∏ –ö–æ–ª–æ–Ω–∫–∏¬ª**
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ Excel –∏–ª–∏ CSV —Ñ–∞–π–ª
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–∏–ø—ã –∫–æ–ª–æ–Ω–æ–∫:
   - **–ß–∏—Å–ª–æ** ‚Äî –¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤ (–ø–ª–æ—â–∞–¥—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
   - **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** ‚Äî –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–≥–æ—Ä–æ–¥, —Ä–∞–π–æ–Ω)
   - **–°–∫—Ä—ã—Ç–æ** ‚Äî –¥–ª—è —Ä—è–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏ (`/hierarchy`)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **¬´–ò–µ—Ä–∞—Ä—Ö–∏—è¬ª**
2. –î–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
3. –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ —É—Ä–æ–≤–Ω–∏ –≤ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
4. –ü—Ä–∏–º–µ—Ä: `–†–µ–≥–∏–æ–Ω` ‚Üí `–ì–æ—Ä–æ–¥` ‚Üí `–†–∞–π–æ–Ω`

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ (`/metrics`)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **¬´–ú–µ—Ç—Ä–∏–∫–∏¬ª**
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–æ(—à–∞–±–ª–æ–Ω):
   - **–ê–≥—Ä–µ–≥–∞—Ü–∏—è:** `SUM(–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)`
   - **–§–æ—Ä–º—É–ª–∞:** –°–æ–∑–¥–∞–π—Ç–µ —Ñ–æ—Ä–º—É–ª—É –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–π –∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä: `(capacity / demand) * 100` 

### 4. –ì—Ä—É–ø–ø—ã –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π (`/groups`)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **¬´–ì—Ä—É–ø–ø—ã¬ª**
2. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–®–∫–æ–ª—ã¬ª)
3. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –ø—Ä–∏–≤—è–∂–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫ –∫–æ–ª–æ–Ω–∫–∞–º Excel

### 5. –î–∞—à–±–æ—Ä–¥ (`/dashboards`)

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥
2. –î–æ–±–∞–≤—å—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –∏ —Å—Ç—Ä–æ–∫–∏ (–≥—Ä—É–ø–ø—ã)
3. –ü—Ä–∏–≤—è–∂–∏—Ç–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –≥—Ä—É–ø–ø –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –∫–æ–ª–æ–Ω–∫–∞–º
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É—Å–ª–æ–≤–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ app/                    # Next.js —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ Server Actions
‚îÇ   ‚îú‚îÄ‚îÄ actions/           # –í—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
‚îÇ   ‚îú‚îÄ‚îÄ dashboards/        # –°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞—à–±–æ—Ä–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ groups/            # –°—Ç—Ä–∞–Ω–∏—Ü—ã –≥—Ä—É–ø–ø –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ hierarchy/         # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–µ—Ä–∞—Ä—Ö–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ metrics/           # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ setup/             # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ entities/              # –ë–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ (FSD)
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/         # –î–∞—à–±–æ—Ä–¥—ã –∏ –º–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ excelData/         # –î–∞–Ω–Ω—ã–µ Excel/CSV
‚îÇ   ‚îú‚îÄ‚îÄ hierarchy/         # –ò–µ—Ä–∞—Ä—Ö–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ indicatorGroup/    # –ì—Ä—É–ø–ø—ã –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ metric/            # –ú–µ—Ç—Ä–∏–∫–∏ –∏ —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ features/              # –§–∏—á–∏ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ AddKpiWidget/      # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ KPI
‚îÇ   ‚îú‚îÄ‚îÄ BuildFormula/      # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ñ–æ—Ä–º—É–ª
‚îÇ   ‚îú‚îÄ‚îÄ CreateMetricTemplate/ # –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îî‚îÄ‚îÄ UploadExcel/       # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ widgets/               # –í–∏–¥–∂–µ—Ç—ã (–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏)
‚îÇ   ‚îú‚îÄ‚îÄ ChartsSection/     # –ì—Ä–∞—Ñ–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ DashboardBuilder/  # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–∞—à–±–æ—Ä–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ HierarchyFilter/   # –§–∏–ª—å—Ç—Ä –∏–µ—Ä–∞—Ä—Ö–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ KpiGrid/           # KPI –≤–∏–¥–∂–µ—Ç—ã
‚îú‚îÄ‚îÄ lib/                   # –û–±—â–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ hooks/             # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ logic/             # –£—Ç–∏–ª–∏—Ç—ã (safe-math, validators)
‚îú‚îÄ‚îÄ shared/                # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ lib/               # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ ui/                # –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îî‚îÄ‚îÄ types/                 # TypeScript —Ç–∏–ø—ã
```

---

## üß™ –°–∫—Ä–∏–ø—Ç—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å Turbopack
npm run dev

# Production —Å–±–æ—Ä–∫–∞
npm run build

# –ó–∞–ø—É—Å–∫ production —Å–µ—Ä–≤–µ—Ä–∞
npm start

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript
npm run type-check

# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
–í—Å–µ Server Actions –∏—Å–ø–æ–ª—å–∑—É—é—Ç Zod —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏:
- –ú–∞–∫—Å–∏–º—É–º 100,000 —Å—Ç—Ä–æ–∫ –¥–∞–Ω–Ω—ã—Ö
- –ú–∞–∫—Å–∏–º—É–º 100 –≥—Ä—É–ø–ø –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- –ú–∞–∫—Å–∏–º—É–º 1000 —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ñ–æ—Ä–º—É–ª–µ

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª
–ü–µ—Ä–µ–¥ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è AST-–∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—É–ª—ã:
- ‚úÖ –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π mathjs
- ‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `require`, `eval`, `process`
- ‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

---

## üìä –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

| –°—Ç–æ—Ä | –•—Ä–∞–Ω–∏–ª–∏—â–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|----------|
| `useExcelDataStore` | IndexedDB | –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ Excel (–±–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã) |
| `useDashboardStore` | localStorage | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤ |
| `useHierarchyStore` | localStorage | –£—Ä–æ–≤–Ω–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏ |
| `useMetricTemplateStore` | localStorage | –®–∞–±–ª–æ–Ω—ã —Ñ–æ—Ä–º—É–ª |
| `useIndicatorGroupStore` | localStorage | –ì—Ä—É–ø–ø—ã –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π |

---

### Docker

```bash
# –°–±–æ—Ä–∫–∞
docker build -t excel-analytics .

# –ó–∞–ø—É—Å–∫
docker run -p 3000:3000 excel-analytics
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **GitHub:** [Unaro/excel-analytics](https://github.com/Unaro/excel-analytics)
- **Demo:** [excel-analytics-teal.vercel.app](https://excel-analytics-teal.vercel.app)

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [Next.js](https://nextjs.org/) ‚Äî React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- [TailwindCSS](https://tailwindcss.com/) ‚Äî Utility-first CSS
- [Zustand](https://zustand-demo.pmnd.rs/) ‚Äî State management
- [Recharts](https://recharts.org/) ‚Äî –ß–∞—Ä—Ç—ã –¥–ª—è React
- [Math.js](https://mathjs.org/) ‚Äî –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
