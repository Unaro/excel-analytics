# Urban Analytics Platform (–ì—Ä–∞–¥–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏–∑)

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel/CSV —Ñ–∞–π–ª–æ–≤, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—á–µ—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞—Ö. –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (Client-Side) –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Ç—è–∂–µ–ª–æ–º –±—ç–∫–µ–Ω–¥–µ.

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Framework:** [Next.js 15](https://nextjs.org/) (App Router)
- **Language:** TypeScript
- **Styling:** [Tailwind CSS v4](https://tailwindcss.com/) + [clsx](https://github.com/lukeed/clsx)
- **State Management:** [Zustand](https://github.com/pmndrs/zustand) (—Å –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ü–∏–µ–π)
- **Storage:** [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) (—á–µ—Ä–µ–∑ `idb-keyval`) –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
- **UI Components:** –ö–∞—Å—Ç–æ–º–Ω—ã–π UI Kit + [Lucide React](https://lucide.dev/) (–∏–∫–æ–Ω–∫–∏).
- **Logic & Math:**
  - `mathjs` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª.
  - `xlsx` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ Excel —Ñ–∞–π–ª–æ–≤.
- **Visualization:**
  - `recharts` ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã.
  - `@dnd-kit` ‚Äî Drag & Drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–∏–µ—Ä–∞—Ä—Ö–∏—è, —Ñ–æ—Ä–º—É–ª—ã).
- **Utilities:** `sonner` (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è), `next-themes` (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞).

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **Client-Side BI**. –î–∞–Ω–Ω—ã–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (Data Flow)

1.  **Raw Data:** Excel —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ `ExcelDataStore` (IndexedDB).
2.  **Meta:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–ª–æ–Ω–æ–∫ (–¢–∏–ø—ã: –ß–∏—Å–ª–æ/–ö–∞—Ç–µ–≥–æ—Ä–∏—è) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `ColumnConfigStore`.
3.  **Rules:**
    *   **–®–∞–±–ª–æ–Ω—ã (Templates):** –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `a / b`).
    *   **–ì—Ä—É–ø–ø—ã (Groups):** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤. –ó–¥–µ—Å—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `a` –∏ `b` –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫–æ–ª–æ–Ω–∫–∞–º Excel –∏–ª–∏ –¥—Ä—É–≥–∏–º –º–µ—Ç—Ä–∏–∫–∞–º.
4.  **Presentation:**
    *   **–î–∞—à–±–æ—Ä–¥:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã (–ö–æ–ª–æ–Ω–∫–∏ = –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏).
    *   **–ú–∞–ø–ø–∏–Ω–≥:** –°–≤—è–∑—ã–≤–∞–µ—Ç –í–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–µ—Ç—Ä–∏–∫—É (–Ω–∞–ø—Ä. "–ú–æ—â–Ω–æ—Å—Ç—å") —Å –†–µ–∞–ª—å–Ω–æ–π –º–µ—Ç—Ä–∏–∫–æ–π –≥—Ä—É–ø–ø—ã (–Ω–∞–ø—Ä. "school_capacity").
5.  **Calculation:**
    *   –•—É–∫ `useDashboardCalculation` —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–≤.
    *   –§–∏–ª—å—Ç—Ä—É–µ—Ç —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –ò–µ—Ä–∞—Ä—Ö–∏–∏.
    *   –í—ã–ø–æ–ª–Ω—è–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
    *   –û—Ç–¥–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –¢–∞–±–ª–∏—Ü—É –∏ –ì—Ä–∞—Ñ–∏–∫–∏.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
/
‚îú‚îÄ‚îÄ actions/              # Server Actions (–≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –ø–∞—Ä—Å–∏–Ω–≥, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–µ—Ä–µ–≤—å–µ–≤)
‚îú‚îÄ‚îÄ app/                  # Next.js App Router (—Å—Ç—Ä–∞–Ω–∏—Ü—ã)
‚îÇ   ‚îú‚îÄ‚îÄ config/           # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ –∏ –≥—Ä—É–ø–ø
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/        # –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ groups/           # CRUD –≥—Ä—É–ø–ø –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ hierarchy/        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ metrics/          # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ setup/            # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–æ–Ω–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx        # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ª–∞–π–∞—É—Ç —Å –°–∞–π–¥–±–∞—Ä–æ–º –∏ –ü—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ (VisualBuilder, GroupBuilder)
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/        # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞ (Table, Charts, HierarchyTree)
‚îÇ   ‚îú‚îÄ‚îÄ layout/           # Sidebar, ThemeToggle
‚îÇ   ‚îú‚îÄ‚îÄ setup/            # FileUploader, ColumnManager
‚îÇ   ‚îî‚îÄ‚îÄ ui/               # –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Button, Card, Input, Modal)
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ hooks/            # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏ (useFileImport, useHierarchyTree...)
‚îÇ   ‚îú‚îÄ‚îÄ stores/           # Zustand —Å—Ç–æ—Ä—ã (dashboard, excel, groups...)
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã (translit, formula parser)
‚îî‚îÄ‚îÄ types/                # TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
```

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞–Ω–Ω—ã—Ö (`/setup`)
- –ò–º–ø–æ—Ä—Ç `.xlsx`, `.csv`.
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –∫–æ–ª–æ–Ω–æ–∫ (–ß–∏—Å–ª–æ/–¢–µ–∫—Å—Ç).
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ IndexedDB (–Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ).

### 2. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ò–µ—Ä–∞—Ä—Ö–∏–∏ (`/hierarchy`)
- Drag & Drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–°—Ç—Ä–∞–Ω–∞ -> –†–µ–≥–∏–æ–Ω -> –ì–æ—Ä–æ–¥).
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏.
- "Self-healing" —Ñ–∏–ª—å—Ç—Ä—ã: –µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—è–µ—Ç—Å—è, —Ñ–∏–ª—å—Ç—Ä—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è.

### 3. –í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Ñ–æ—Ä–º—É–ª (`/metrics`)
- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º—É–ª –º–µ—Ç–æ–¥–æ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è (Drag & Drop).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–∏–∞—Å—ã: `revenue`, `total`).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π (`SUM`, `AVG`, `MAX`) –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤.

### 4. –ì—Ä—É–ø–ø—ã –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π (`/groups`)
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ (—Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã).
- **Binding System:** –ü—Ä–∏–≤—è–∑–∫–∞ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ —Ñ–æ—Ä–º—É–ª (`a`, `b`) –∫ —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–ª–æ–Ω–∫–∞–º Excel –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –¥—Ä—É–≥–∏—Ö –º–µ—Ç—Ä–∏–∫ –≤ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø–µ.

### 5. –î–∞—à–±–æ—Ä–¥—ã (`/dashboards`)
- **–ú–∞—Ç—Ä–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –∫–∞–∫–∞—è –º–µ—Ç—Ä–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –ì—Ä—É–ø–ø—ã (–°—Ç—Ä–æ–∫–∞) –∏ –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∫–æ–ª–æ–Ω–∫–∏.
- **–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä:** –î–µ—Ä–µ–≤–æ (Tree View) —Å –ø–æ–¥–≥—Ä—É–∑–∫–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–∏—Å–∫–æ–º.
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (Bar, Radar) –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## üí° –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Workflow)

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **"–î–∞–Ω–Ω—ã–µ –∏ –ö–æ–ª–æ–Ω–∫–∏"**.
2.  –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª.
3.  –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø—ã –∫–æ–ª–æ–Ω–æ–∫: –¥–ª—è –ø–æ–ª–µ–π, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–ì–æ—Ä–æ–¥, –†–∞–π–æ–Ω), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–∏–ø **"–ö–∞—Ç–µ–≥–æ—Ä–∏—è"**. –î–ª—è –¥–∞–Ω–Ω—ã—Ö (–ü–ª–æ—â–∞–¥—å, –ú–µ—Å—Ç–∞) ‚Äî **"–ß–∏—Å–ª–æ"**.
4.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–ò–µ—Ä–∞—Ä—Ö–∏—è"** –∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —É—Ä–æ–≤–Ω–∏ –≤ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `–†–µ–≥–∏–æ–Ω` -> `–ì–æ—Ä–æ–¥`).

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–ú–µ—Ç—Ä–∏–∫–∏"**. –°–æ–∑–¥–∞–π—Ç–µ —à–∞–±–ª–æ–Ω—ã —Ä–∞—Å—á–µ—Ç–æ–≤.
    *   *–ü—Ä–∏–º–µ—Ä:* –°–æ–∑–¥–∞–π—Ç–µ —à–∞–±–ª–æ–Ω "–û–±–µ—Å–ø–µ—á–µ–Ω–Ω–æ—Å—Ç—å %" —Å —Ñ–æ—Ä–º—É–ª–æ–π `(capacity / demand) * 100`.
2.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–ì—Ä—É–ø–ø—ã –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π"**. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É "–®–∫–æ–ª—ã".
3.  –î–æ–±–∞–≤—å—Ç–µ —à–∞–±–ª–æ–Ω "–û–±–µ—Å–ø–µ—á–µ–Ω–Ω–æ—Å—Ç—å %".
4.  –°–∏—Å—Ç–µ–º–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç –ø—Ä–∏–≤—è–∑–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
    *   `capacity` -> –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É "–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —à–∫–æ–ª".
    *   `demand` -> –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–æ–Ω–∫—É "–ß–∏—Å–ª–µ–Ω–Ω–æ—Å—Ç—å —à–∫–æ–ª—å–Ω–∏–∫–æ–≤".

### –®–∞–≥ 3: –°–±–æ—Ä–∫–∞ –î–∞—à–±–æ—Ä–¥–∞
1.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–î–∞—à–±–æ—Ä–¥—ã"** -> "–°–æ–∑–¥–∞—Ç—å".
2.  –î–æ–±–∞–≤—å—Ç–µ –∫–æ–ª–æ–Ω–∫—É "–û–±–µ—Å–ø–µ—á–µ–Ω–Ω–æ—Å—Ç—å".
3.  –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (–ì—Ä—É–ø–ø—É) "–®–∫–æ–ª—ã".
4.  –í —è—á–µ–π–∫–µ –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç—Ä–∏–∫—É, –∫–æ—Ç–æ—Ä—É—é –≤—ã —Å–æ–∑–¥–∞–ª–∏ –≤ —à–∞–≥–µ 2.
5.  –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ.

### –®–∞–≥ 4: –ê–Ω–∞–ª–∏–∑
–û—Ç–∫—Ä–æ–π—Ç–µ –¥–∞—à–±–æ—Ä–¥. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä —Å–ª–µ–≤–∞, —á—Ç–æ–±—ã —É–≥–ª—É–±–∏—Ç—å—Å—è –¥–æ –Ω—É–∂–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞/—Ä–∞–π–æ–Ω–∞. –¢–∞–±–ª–∏—Ü–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Developer Guide)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∫–æ–¥–∞

#### 1. Hydration & Persistence
–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `localStorage` –∏ `IndexedDB`. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏ (–∫–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π HTML –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ, —Ç–∞–∫ –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç localStorage), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ö—É–∫ `useStoreHydration`.
*–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –¥–∞–Ω–Ω—ã—Ö, –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å `if (!hydrated) return <Loader />`.*

#### 2. –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (Virtual Metrics)
–≠—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è –∫–æ–ª–æ–Ω–æ–∫ –¥–∞—à–±–æ—Ä–¥–∞.
*   –í `IndicatorGroup` (–≥—Ä—É–ø–ø–µ) –µ—Å—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ (`metricId: "abc"`).
*   –í `Dashboard` –µ—Å—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–ª–æ–Ω–æ–∫ (`virtualMetricId: "col_1"`).
*   –°–≤—è–∑—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ `indicatorGroups` –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ `Dashboard`: `virtualMetricBindings: [{ virtualMetricId: "col_1", metricId: "abc" }]`.

#### 3. DND Kit
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Å–ø–∏—Å–∫–æ–≤, –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –∏—Ö –≤ `<DndContext>` –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏–∑ `@dnd-kit/sortable`.

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º (Troubleshooting)

*   **–û—à–∏–±–∫–∞ "Hydration failed":** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useStoreHydration` –∏–ª–∏ –æ–±–µ—Ä–Ω—É—Ç –≤ `ClientOnly` –ª–æ–≥–∏–∫—É.
*   **–§–∏–ª—å—Ç—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Excel –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –≥–æ—Ä–æ–¥–æ–≤ (—Å–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–µ—Ç `.trim()`, –Ω–æ –ª—É—á—à–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫).
*   **–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `useEffect` –≤ —Ö—É–∫–∞—Ö. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã —Å—Ç–æ—Ä–∞, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ –Ω–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.filter()`), –ø—Ä—è–º–æ –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ `useStore(s => s.items.filter(...))`. –§–∏–ª—å—Ç—Ä—É–π—Ç–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ `useMemo`.

---

## üì¶ –≠–∫—Å–ø–æ—Ä—Ç –∏ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–í —Ä–∞–∑–¥–µ–ª–µ **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"** –¥–æ—Å—Ç—É–ø–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `.json`.
*   **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤, —Ñ–æ—Ä–º—É–ª—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä—É–ø–ø, –∏–µ—Ä–∞—Ä—Ö–∏—è.
*   **–ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:** –°–∞–º Excel —Ñ–∞–π–ª (–∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –∏ –æ–±—ä–µ–º–∞).

–ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –Ω–∞ –¥—Ä—É–≥–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä:
1.  –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ JSON.
2.  –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ JSON –Ω–∞ –Ω–æ–≤–æ–º –º–µ—Å—Ç–µ.
3.  –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π Excel —Ñ–∞–π–ª.
